import{getWrapper as e}from"fetch";import{$loading as t,$submitBtn as o}from"loading";import{getWrapper as e,postWrapper as n}from"fetch";export const $addNoteBtn=document.getElementById("addNote");export async function getNoteModal(d,a){let l="/notes/writeNoteForm";return a.length&&(l+="/noteid/"+a),e({url:l,$loadingDiv:null,loading:t,dataHandler:e=>{let t=document.createElement("div");t.innerHTML=e,document.getElementById("loadedModal").appendChild(t),globalModals.$noteModal=new bootstrap.Modal(document.getElementById("noteModal"),{});const d=document.getElementById("writeNoteForm"),a=document.getElementById("submitNoteForm");a.addEventListener("click",async e=>{let t=d.checkValidity();if(d.classList.add("was-validated"),!t)return e.preventDefault(),void e.stopPropagation();document.getElementById("closeNoteForm").disabled=!0;let l=new FormData(d),r=Object.fromEntries(l.entries());await async function submitNoteModal(e,t,d){return n({url:"/notes/addNote",$loadingBtn:d,loading:o,packet:JSON.stringify(t),responseType:"json",dataHandler:e=>{if(!e.success)throw Error(e.message);window.location.reload()}})}(0,r,a)}),globalModals.$noteModal.show()}})}export const runtime={all:()=>{},notelist:()=>{$addNoteBtn.addEventListener("click",async e=>{await getNoteModal("add","")})}};