import{Client as t}from"@stomp/stompjs";let e=null;const o=document.getElementById("currentEvent").dataset.environment.toLowerCase();export function startMetricsSocket(){if(e?.active)return;e=new t({brokerURL:"production"==o?"wss://pogotracker.app/ws":"ws://localhost:8081/ws",reconnectDelay:5e3,heartbeatIncoming:1e4,heartbeatOutgoing:1e4,connectHeaders:{},onConnect:()=>{e.subscribe("metrics",t=>{try{const e=JSON.parse(t.body);if(!e?.success)return;const o=new CustomEvent("metricsUpdate",{detail:e.data});document.dispatchEvent(o)}catch(t){}})},onStompError:t=>{}}),e.activate()}export function stopMetricsSocket(){e&&(e.deactivate(),e=null)}